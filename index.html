<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>iOS9 3DTouch、ShortcutItem、Peek And Pop技术一览 by applexiaohao</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>iOS9 3DTouch、ShortcutItem、Peek And Pop技术一览</h1>
        <h2></h2>
        <a href="https://github.com/applexiaohao/blog.io" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h2>
<a id="ios9-3dtouchshortcutitempeek-and-pop技术一览" class="anchor" href="#ios9-3dtouchshortcutitempeek-and-pop%E6%8A%80%E6%9C%AF%E4%B8%80%E8%A7%88" aria-hidden="true"><span class="octicon octicon-link"></span></a>iOS9 3DTouch、ShortcutItem、Peek And Pop技术一览</h2>

<h3>
<a id="3dtouch" class="anchor" href="#3dtouch" aria-hidden="true"><span class="octicon octicon-link"></span></a>3DTouch</h3>

<h4>
<a id="uitouch" class="anchor" href="#uitouch" aria-hidden="true"><span class="octicon octicon-link"></span></a>UITouch</h4>

<h6>
<a id="ios9中添加的属性" class="anchor" href="#ios9%E4%B8%AD%E6%B7%BB%E5%8A%A0%E7%9A%84%E5%B1%9E%E6%80%A7" aria-hidden="true"><span class="octicon octicon-link"></span></a>iOS9中添加的属性</h6>

<p><code>altitudeAngle</code></p>

<ul>
<li><p>当笔平行于平面时,该值为0</p></li>
<li><p>当笔垂直于平面时,该值为Pi / 2</p></li>
</ul>

<p><code>estimatedProperties</code></p>

<ul>
<li><p>当前触摸对象估计的触摸特性</p></li>
<li><p>返回值是UITouchPropertyies</p></li>
</ul>

<p><code>updatedProperties</code></p>

<ul>
<li><p>当前触摸对象已经更新的触摸特性</p></li>
<li><p>返回值是UITouchPropertyies</p></li>
</ul>

<p><code>estimationUpdateIndex</code></p>

<ul>
<li><p>当每个触摸对象的触摸特性发生变化时，该值将会单独增加</p></li>
<li><p>返回值是NSNumber</p></li>
</ul>

<h6>
<a id="ios9中添加的方法" class="anchor" href="#ios9%E4%B8%AD%E6%B7%BB%E5%8A%A0%E7%9A%84%E6%96%B9%E6%B3%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>iOS9中添加的方法</h6>

<p><code>- PreciseLocationInView:</code></p>

<ul>
<li>当前触摸对象的坐标</li>
</ul>

<p><code>- PrecisePreviousLocationInView:</code></p>

<ul>
<li>当前触摸对象的前置坐标</li>
</ul>

<p><code>- azimuthAngleInview:</code></p>

<ul>
<li><p>沿着x轴正向的方位角</p></li>
<li><p>当与x轴正向方向相同时,该值为0</p></li>
<li><p>当view参数为nil时，默认为keyWindow</p></li>
</ul>

<p><code>- azimuthUnitVectorInView:</code></p>

<ul>
<li><p>当前触摸对象的方向上的单位向量</p></li>
<li><p>当view参数为nil时，默认为keyWindow</p></li>
</ul>

<h4>
<a id="uiforcetouchcapability" class="anchor" href="#uiforcetouchcapability" aria-hidden="true"><span class="octicon octicon-link"></span></a>UIForceTouchCapability</h4>

<p><code>UIForceTouchCapabilityUnknown</code></p>

<ul>
<li>不能确定是否支持压力感应
<code>UIForceTouchCapabilityUnavailable</code>
</li>
<li>不能支持压力感应
<code>UIForceTouchCapabilityAvailable</code>
</li>
<li>可以支持压力感应</li>
</ul>

<h4>
<a id="uitouchtype" class="anchor" href="#uitouchtype" aria-hidden="true"><span class="octicon octicon-link"></span></a>UITouchType</h4>

<p><code>UITouchTypeDirect</code></p>

<ul>
<li>垂直的触摸类型
<code>UITouchTypeIndirect</code>
</li>
<li>非初值的触摸类型
<code>UITouchTypeStylus</code>
</li>
<li>水平的触摸类型</li>
</ul>

<h4>
<a id="uitouchproperties" class="anchor" href="#uitouchproperties" aria-hidden="true"><span class="octicon octicon-link"></span></a>UITouchProperties</h4>

<p><code>UITouchPropertyForce</code></p>

<h3>
<a id="shortcutitem" class="anchor" href="#shortcutitem" aria-hidden="true"><span class="octicon octicon-link"></span></a>ShortcutItem</h3>

<h4>
<a id="静态方式" class="anchor" href="#%E9%9D%99%E6%80%81%E6%96%B9%E5%BC%8F" aria-hidden="true"><span class="octicon octicon-link"></span></a>静态方式</h4>

<ul>
<li>打开Info.plist文件</li>
<li>在对应UIApplicationShortcutItems关键字下添加item</li>
</ul>

<h4>
<a id="动态方式" class="anchor" href="#%E5%8A%A8%E6%80%81%E6%96%B9%E5%BC%8F" aria-hidden="true"><span class="octicon octicon-link"></span></a>动态方式</h4>

<h6>
<a id="修改当前应用程序的某个shortcutitem" class="anchor" href="#%E4%BF%AE%E6%94%B9%E5%BD%93%E5%89%8D%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9F%90%E4%B8%AAshortcutitem" aria-hidden="true"><span class="octicon octicon-link"></span></a>修改当前应用程序的某个shortcutItem</h6>

<pre><code>  //获取第0个shortcutItem  
  id oldItem = [existingShortcutItems objectAtIndex: 0];  
  //将旧的shortcutItem改变为可修改类型shortcutItem  
  id mutableItem = [oldItem mutableCopy];  
  //修改shortcutItem的显示标题  
  [mutableItem setLocalizedTitle: @“Click Lewis”];
</code></pre>

<h6>
<a id="获取当前应用程序的shortcutitems" class="anchor" href="#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84shortcutitems" aria-hidden="true"><span class="octicon octicon-link"></span></a>获取当前应用程序的shortcutItems</h6>

<pre><code>  //获取当前应用程序对象  
  UIApplication *app = [UIApplication sharedApplication];  
  //获取一个应用程序对象的shortcutItem列表  
  id existingShortcutItems = [app shortcutItems];
</code></pre>

<h6>
<a id="重置当前应用程序的shortcutitems" class="anchor" href="#%E9%87%8D%E7%BD%AE%E5%BD%93%E5%89%8D%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84shortcutitems" aria-hidden="true"><span class="octicon octicon-link"></span></a>重置当前应用程序的shortcutItems</h6>

<pre><code>  //根据旧的shortcutItems生成可变shortcutItems数组  
  id updatedShortcutItems = [existingShortcutItems mutableCopy];  
  //修改可变shortcutItems数组中对应index下的元素为新的shortcutItem  
  [updatedShortcutItems replaceObjectAtIndex: 0 withObject: mutableItem];  
  //修改应用程序对象的shortcutItems为新的数组  
  [app setShortcutItems: updatedShortcutItems];
</code></pre>

<h6>
<a id="创建一个新的uiapplicationshortcutitem" class="anchor" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84uiapplicationshortcutitem" aria-hidden="true"><span class="octicon octicon-link"></span></a>创建一个新的UIApplicationShortcutItem</h6>

<ul>
<li>
<p>初始化函数</p>

<ul>
<li><code>- initWithType:localizedTitle:localizedSubtitle:icon:userInfo:</code></li>
<li><code>- initWithType:localizedTitle:</code></li>
</ul>
</li>
<li>
<p>属性</p>

<ul>
<li><p><code>localizedTitle:NSString</code></p></li>
<li><p><code>- localizedSubtitle:NSString</code></p></li>
<li><p><code>- type:NSString</code></p></li>
<li><p><code>- icon:UIApplicationShortcutIcon</code></p></li>
<li><p><code>- userInfo:NSDictionary</code></p></li>
<li>只有只读特性，想要进行修改时，需要通过mutableCopy方法转变为<br>
NSMutableApplicationShortcutItem</li>
</ul>
</li>
</ul>

<h6>
<a id="创建一个新的item图标" class="anchor" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84item%E5%9B%BE%E6%A0%87" aria-hidden="true"><span class="octicon octicon-link"></span></a>创建一个新的Item图标</h6>

<ul>
<li>
<p>初始化函数</p>

<ul>
<li><p><code>+ iconWithType:</code></p></li>
<li><p><code>+ iconWithTemplateImageName:</code></p></li>
<li><p><code>+ iconWithContact:</code></p></li>
</ul>
</li>
</ul>

<h4>
<a id="当程序启动时" class="anchor" href="#%E5%BD%93%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E6%97%B6" aria-hidden="true"><span class="octicon octicon-link"></span></a>当程序启动时</h4>

<ul>
<li><p>判断launchOptions字典内的UIApplicationLaunchOptionsShortcutItemKey是否为空</p></li>
<li><p>当不为空时,application:didFinishLaunchWithOptions方法返回false，否则返回true</p></li>
<li><p>在application:performActionForShortcutItem:completionHandler方法内处理点击事件</p></li>
</ul>

<h3>
<a id="peek-and-pop" class="anchor" href="#peek-and-pop" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Peek and Pop</strong>
</h3>

<h4>
<a id="注册预览功能的代理对象和源视图" class="anchor" href="#%E6%B3%A8%E5%86%8C%E9%A2%84%E8%A7%88%E5%8A%9F%E8%83%BD%E7%9A%84%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E5%92%8C%E6%BA%90%E8%A7%86%E5%9B%BE" aria-hidden="true"><span class="octicon octicon-link"></span></a>注册预览功能的代理对象和源视图</h4>

<h6>
<a id="代理对象需要接受uiviewcontrollerpreviewingdelegate协议" class="anchor" href="#%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E9%9C%80%E8%A6%81%E6%8E%A5%E5%8F%97uiviewcontrollerpreviewingdelegate%E5%8D%8F%E8%AE%AE" aria-hidden="true"><span class="octicon octicon-link"></span></a>代理对象需要接受UIViewControllerPreviewingDelegate协议</h6>

<pre><code>  @interface RootVC&lt;UIViewControllerPreviewingDelegate&gt;  
  {}  
  @end
</code></pre>

<h6>
<a id="代理对象实现协议内的peek和pop方法" class="anchor" href="#%E4%BB%A3%E7%90%86%E5%AF%B9%E8%B1%A1%E5%AE%9E%E7%8E%B0%E5%8D%8F%E8%AE%AE%E5%86%85%E7%9A%84peek%E5%92%8Cpop%E6%96%B9%E6%B3%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>代理对象实现协议内的Peek和Pop方法</h6>

<pre><code>  @implementation RootVC  
  - (UIViewController *)previewingContext:(id&lt;UIViewControllerPreviewing&gt;)context viewControllerForLocation:(CGPoint) point  
  {  
    UIViewController *childVC = [[UIViewController alloc] init];  
    childVC.preferredContentSize = CGSizeMake(0.0f,300f);  

    CGRect rect = CGRectMake(10, point.y - 10, self.view.frame.size.width - 20,20);  
    context.sourceRect = rect;  
    return childVC;  
  }  
  - (void)previewContext:(id&lt;UIViewControllerPreviewing&gt;)context commitViewController:(UIViewController*)vc  
  {  
    [self showViewController:vc sender:self];  
  }  
  @end
</code></pre>

<h6>
<a id="注册方法声明在uiviewcontroller类内" class="anchor" href="#%E6%B3%A8%E5%86%8C%E6%96%B9%E6%B3%95%E5%A3%B0%E6%98%8E%E5%9C%A8uiviewcontroller%E7%B1%BB%E5%86%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>注册方法声明在UIViewController类内</h6>

<pre><code>[self registerForPreviewingWithDelegate:self sourceView:self.view];
</code></pre>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/applexiaohao/blog.io/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/applexiaohao/blog.io/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/applexiaohao/blog.io"></a> is maintained by <a href="https://github.com/applexiaohao">applexiaohao</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
