{"name":"iOS9 3DTouch、ShortcutItem、Peek And Pop技术一览","tagline":"","body":"## iOS9 3DTouch、ShortcutItem、Peek And Pop技术一览\r\n\r\n### 3DTouch\r\n#### UITouch\r\n\r\n###### iOS9中添加的属性\r\n\r\n`altitudeAngle`\r\n\r\n- 当笔平行于平面时,该值为0\r\n\r\n- 当笔垂直于平面时,该值为Pi / 2\r\n\r\n`estimatedProperties`\r\n\r\n- 当前触摸对象估计的触摸特性\r\n\r\n- 返回值是UITouchPropertyies\r\n\r\n`updatedProperties`\r\n\r\n- 当前触摸对象已经更新的触摸特性\r\n\r\n- 返回值是UITouchPropertyies\r\n\r\n`estimationUpdateIndex`\r\n\r\n- 当每个触摸对象的触摸特性发生变化时，该值将会单独增加\r\n\r\n- 返回值是NSNumber\r\n\r\n######iOS9中添加的方法\r\n\r\n`- PreciseLocationInView:`\r\n\r\n- 当前触摸对象的坐标\r\n\r\n`- PrecisePreviousLocationInView:`\r\n\r\n- 当前触摸对象的前置坐标\r\n\r\n`- azimuthAngleInview:`\r\n\r\n- 沿着x轴正向的方位角\r\n\r\n- 当与x轴正向方向相同时,该值为0\r\n\r\n- 当view参数为nil时，默认为keyWindow\r\n\r\n`- azimuthUnitVectorInView:`\r\n\r\n- 当前触摸对象的方向上的单位向量\r\n\r\n- 当view参数为nil时，默认为keyWindow\r\n\r\n#### UIForceTouchCapability\r\n`UIForceTouchCapabilityUnknown`\r\n- 不能确定是否支持压力感应\r\n`UIForceTouchCapabilityUnavailable`\r\n- 不能支持压力感应\r\n`UIForceTouchCapabilityAvailable`\r\n- 可以支持压力感应\r\n\r\n#### UITouchType\r\n`UITouchTypeDirect`\r\n- 垂直的触摸类型\r\n`UITouchTypeIndirect`\r\n- 非初值的触摸类型\r\n`UITouchTypeStylus`\r\n- 水平的触摸类型\r\n\r\n#### UITouchProperties\r\n`UITouchPropertyForce`\r\n\r\n### ShortcutItem\r\n#### 静态方式\r\n\r\n- 打开Info.plist文件\r\n- 在对应UIApplicationShortcutItems关键字下添加item\r\n\r\n#### 动态方式\r\n\r\n###### 修改当前应用程序的某个shortcutItem\r\n```\r\n  //获取第0个shortcutItem  \r\n  id oldItem = [existingShortcutItems objectAtIndex: 0];  \r\n  //将旧的shortcutItem改变为可修改类型shortcutItem  \r\n  id mutableItem = [oldItem mutableCopy];  \r\n  //修改shortcutItem的显示标题  \r\n  [mutableItem setLocalizedTitle: @“Click Lewis”];\r\n```\r\n###### 获取当前应用程序的shortcutItems\r\n```\r\n  //获取当前应用程序对象  \r\n  UIApplication *app = [UIApplication sharedApplication];  \r\n  //获取一个应用程序对象的shortcutItem列表  \r\n  id existingShortcutItems = [app shortcutItems];\r\n```\r\n###### 重置当前应用程序的shortcutItems\r\n\r\n```\r\n  //根据旧的shortcutItems生成可变shortcutItems数组  \r\n  id updatedShortcutItems = [existingShortcutItems mutableCopy];  \r\n  //修改可变shortcutItems数组中对应index下的元素为新的shortcutItem  \r\n  [updatedShortcutItems replaceObjectAtIndex: 0 withObject: mutableItem];  \r\n  //修改应用程序对象的shortcutItems为新的数组  \r\n  [app setShortcutItems: updatedShortcutItems];\r\n```\r\n###### 创建一个新的UIApplicationShortcutItem\r\n\r\n- 初始化函数\r\n\t- `- initWithType:localizedTitle:localizedSubtitle:icon:userInfo:`\r\n\t- `- initWithType:localizedTitle:`\r\n\r\n- 属性\r\n\t- `localizedTitle:NSString`\r\n\r\n\t- `- localizedSubtitle:NSString`\r\n\r\n\t- `- type:NSString`\r\n\r\n\t- `- icon:UIApplicationShortcutIcon`\r\n\r\n\t- `- userInfo:NSDictionary`\r\n\t- 只有只读特性，想要进行修改时，需要通过mutableCopy方法转变为  \r\n  NSMutableApplicationShortcutItem\r\n\r\n###### 创建一个新的Item图标\r\n\r\n- 初始化函数\r\n\r\n\t- `+ iconWithType:`\r\n\r\n\t- `+ iconWithTemplateImageName: `\r\n\r\n\t- `+ iconWithContact:`\r\n\r\n#### 当程序启动时\r\n\r\n- 判断launchOptions字典内的UIApplicationLaunchOptionsShortcutItemKey是否为空\r\n\r\n- 当不为空时,application:didFinishLaunchWithOptions方法返回false，否则返回true\r\n\r\n- 在application:performActionForShortcutItem:completionHandler方法内处理点击事件\r\n\r\n### **Peek and Pop**\r\n\r\n\r\n####  注册预览功能的代理对象和源视图\r\n\r\n###### 代理对象需要接受UIViewControllerPreviewingDelegate协议\r\n```\r\n  @interface RootVC<UIViewControllerPreviewingDelegate>  \r\n  {}  \r\n  @end\r\n```\r\n###### 代理对象实现协议内的Peek和Pop方法\r\n```\r\n  @implementation RootVC  \r\n  - (UIViewController *)previewingContext:(id<UIViewControllerPreviewing>)context viewControllerForLocation:(CGPoint) point  \r\n  {  \r\n  \tUIViewController *childVC = [[UIViewController alloc] init];  \r\n  \tchildVC.preferredContentSize = CGSizeMake(0.0f,300f);  \r\n  \t  \r\n  \tCGRect rect = CGRectMake(10, point.y - 10, self.view.frame.size.width - 20,20);  \r\n  \tcontext.sourceRect = rect;  \r\n  \treturn childVC;  \r\n  }  \r\n  - (void)previewContext:(id<UIViewControllerPreviewing>)context commitViewController:(UIViewController*)vc  \r\n  {  \r\n  \t[self showViewController:vc sender:self];  \r\n  }  \r\n  @end\r\n```\r\n###### 注册方法声明在UIViewController类内\r\n```\r\n[self registerForPreviewingWithDelegate:self sourceView:self.view];\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}